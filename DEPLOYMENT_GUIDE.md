# üöÄ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –¥–µ–ø–ª–æ—é Telegram –±–æ—Ç–∞ –≤ Replit

## –ü—Ä–æ–±–ª–µ–º–∞ —Å –¥–µ–ø–ª–æ–µ–º

Replit Deployments —Ç—Ä–µ–±—É–µ—Ç –≤–µ–±-—Å–µ—Ä–≤–µ—Ä —Å HTTP endpoints –¥–ª—è health check. Telegram –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ long polling, –ø–æ—ç—Ç–æ–º—É –Ω—É–∂–µ–Ω –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –≤–µ–±-—Å–µ—Ä–≤–µ—Ä.

## –†–µ—à–µ–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –û—Å–Ω–æ–≤–Ω–æ–π (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π)

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `health_server.py` - –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π Flask —Å–µ—Ä–≤–µ—Ä —Ç–æ–ª—å–∫–æ –¥–ª—è health check:

```bash
# –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –¥–ª—è –¥–µ–ø–ª–æ—è
python health_server.py
```

**Endpoints:**
- `GET /` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–∏—Å–µ
- `GET /health` - health check –¥–ª—è Replit
- `GET /status` - —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `web_server.py` - –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –∑–∞–ø—É—Å–∫–æ–º –±–æ—Ç–∞:

```bash
# –í–µ–±-—Å–µ—Ä–≤–µ—Ä + Telegram –±–æ—Ç
python web_server.py
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –†–∞–∑–¥–µ–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–≤–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–∞:

```bash
# –ü—Ä–æ—Ü–µ—Å—Å 1: Telegram –±–æ—Ç
python simple_main.py

# –ü—Ä–æ—Ü–µ—Å—Å 2: –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ª–æ–≥–æ–≤  
python log_viewer.py
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –¥–µ–ø–ª–æ—è

### Replit Deployment Settings

1. **Main Command**: `python health_server.py`
2. **Port**: 5000
3. **Environment Variables**:
   - `BOT_TOKEN` - —Ç–æ–∫–µ–Ω Telegram –±–æ—Ç–∞
   - `DATABASE_URL` - URL –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö PostgreSQL

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
üìÅ telegram-bot/
‚îú‚îÄ‚îÄ üìÑ health_server.py     # Health check —Å–µ—Ä–≤–µ—Ä (–¥–ª—è –¥–µ–ø–ª–æ—è)
‚îú‚îÄ‚îÄ üìÑ web_server.py        # –ü–æ–ª–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îú‚îÄ‚îÄ üìÑ simple_main.py       # –û—Å–Ω–æ–≤–Ω–æ–π Telegram –±–æ—Ç
‚îú‚îÄ‚îÄ üìÑ log_viewer.py        # –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ª–æ–≥–æ–≤
‚îú‚îÄ‚îÄ üìÑ models.py            # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ üìÑ database.py          # –†–∞–±–æ—Ç–∞ —Å –ë–î
‚îú‚îÄ‚îÄ üìÑ task_parser.py       # –ü–∞—Ä—Å–∏–Ω–≥ –∑–∞–¥–∞—á
‚îú‚îÄ‚îÄ üìÑ time_utils.py        # –£—Ç–∏–ª–∏—Ç—ã –≤—Ä–µ–º–µ–Ω–∏
‚îî‚îÄ‚îÄ üìÅ logs/                # –§–∞–π–ª—ã –ª–æ–≥–æ–≤
```

## –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–µ–ø–ª–æ—è

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —Ñ–∞–π–ª—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ Replit
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è `BOT_TOKEN` –∏ `DATABASE_URL`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ `pyproject.toml`

### –®–∞–≥ 2: –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
# –¢–µ—Å—Ç health —Å–µ—Ä–≤–µ—Ä–∞
python health_server.py

# –ü—Ä–æ–≤–µ—Ä–∫–∞ endpoints
curl http://localhost:5000/health
```

### –®–∞–≥ 3: –î–µ–ø–ª–æ–π
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ä–∞–∑–¥–µ–ª "Deploy" –≤ Replit
2. –í—ã–±–µ—Ä–∏—Ç–µ "Autoscale deployment"
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É: `python health_server.py`
4. –ù–∞–∂–º–∏—Ç–µ "Deploy"

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞
–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
- `https://your-app.replit.app/health` - health check
- `https://your-app.replit.app/status` - —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## –ó–∞–ø—É—Å–∫ Telegram –±–æ—Ç–∞ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è health —Å–µ—Ä–≤–µ—Ä–∞ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ –æ—Ç–¥–µ–ª—å–Ω–æ:

### –í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ Replit Console
```bash
python simple_main.py
```

### –í–∞—Ä–∏–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –≤–æ—Ä–∫—Ñ–ª–æ—É
–°–æ–∑–¥–∞–π—Ç–µ –≤—Ç–æ—Ä–æ–π Replit –ø—Ä–æ—Ü–µ—Å—Å –¥–ª—è –±–æ—Ç–∞ (–±–µ–∑ wait_for_port).

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –±–æ—Ç–∞
1. **–§–∞–π–ª—ã**: –ª–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `logs/telegram_bot.log`
2. **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: –∑–∞–ø—É—Å—Ç–∏—Ç–µ `python log_viewer.py` –Ω–∞ –ø–æ—Ä—Ç—É 5001
3. **–ö–æ–Ω—Å–æ–ª—å**: –ª–æ–≥–∏ –≤–∏–¥–Ω—ã –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ `python simple_main.py`

### Health check endpoints

#### GET /health
```json
{
  "status": "healthy",
  "timestamp": "2025-06-27T19:30:00"
}
```

#### GET /status
```json
{
  "service": "running", 
  "uptime": "0:15:30",
  "bot_token_configured": true
}
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### "Health check failure"
**–ü—Ä–∏—á–∏–Ω–∞**: Replit –Ω–µ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ health endpoint
**–†–µ—à–µ–Ω–∏–µ**: 
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ `health_server.py`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä —Å–ª—É—à–∞–µ—Ç –Ω–∞ `0.0.0.0:5000`
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ: `curl http://localhost:5000/health`

### "No web server is running"
**–ü—Ä–∏—á–∏–Ω–∞**: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ HTTP –∑–∞–ø—Ä–æ—Å—ã
**–†–µ—à–µ–Ω–∏–µ**:
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Flask —Å–µ—Ä–≤–µ—Ä –≤–º–µ—Å—Ç–æ –ø—Ä–æ—Å—Ç–æ–≥–æ Python —Å–∫—Ä–∏–ø—Ç–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç 5000 –æ—Ç–∫—Ä—ã—Ç –∏ –¥–æ—Å—Ç—É–ø–µ–Ω

### "Missing HTTP endpoint implementation"
**–ü—Ä–∏—á–∏–Ω–∞**: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∫–æ—Ä–Ω–µ–≤–æ–π endpoint
**–†–µ—à–µ–Ω–∏–µ**:
- –î–æ–±–∞–≤—å—Ç–µ `@app.route('/')` –≤ Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ endpoint –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç HTTP 200

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
**–ü—Ä–∏—á–∏–Ω–∞**: –ë–æ—Ç –Ω–µ –∑–∞–ø—É—â–µ–Ω –∏–ª–∏ –Ω–µ—Ç —Ç–æ–∫–µ–Ω–∞
**–†–µ—à–µ–Ω–∏–µ**:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `BOT_TOKEN`
- –ó–∞–ø—É—Å—Ç–∏—Ç–µ `python simple_main.py` –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `tail -f logs/telegram_bot.log`

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

–ï—Å–ª–∏ –¥–µ–ø–ª–æ–π –≤ Replit –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:

1. **Railway**: –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç background –ø—Ä–æ—Ü–µ—Å—Å—ã
2. **Render**: –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π tier –¥–ª—è –≤–µ–±-—Å–µ—Ä–≤–∏—Å–æ–≤
3. **Heroku**: –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –¥–µ–ø–ª–æ—è
4. **DigitalOcean App Platform**: –ø—Ä–æ—Å—Ç–æ–π –¥–µ–ø–ª–æ–π

## –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–î–ª—è production –¥–µ–ø–ª–æ—è:

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Gunicorn** –≤–º–µ—Å—Ç–æ development —Å–µ—Ä–≤–µ—Ä–∞ Flask:
   ```bash
   pip install gunicorn
   gunicorn -w 4 -b 0.0.0.0:5000 health_server:app
   ```

2. **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**:
   - `FLASK_ENV=production`
   - `PYTHONPATH=.`

3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**:
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã –Ω–∞ health check
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ external —Å–µ—Ä–≤–∏—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, Papertrail)

4. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**:
   - HTTPS only
   - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ –ª–æ–≥–∞–º
   - Rate limiting –¥–ª—è API endpoints

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–°–∞–º—ã–π –Ω–∞–¥–µ–∂–Ω—ã–π —Å–ø–æ—Å–æ–± –¥–µ–ø–ª–æ—è:
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `health_server.py` –¥–ª—è health check
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `simple_main.py` –≤ background –¥–ª—è Telegram –±–æ—Ç–∞
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `log_viewer.py` –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

–≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏—Ç —Å—Ç–∞–±–∏–ª—å–Ω—É—é —Ä–∞–±–æ—Ç—É –≤ Replit Deployments.